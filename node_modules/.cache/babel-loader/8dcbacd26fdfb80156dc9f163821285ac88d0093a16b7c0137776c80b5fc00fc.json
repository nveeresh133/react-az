{"ast":null,"code":"import React from'react';import{withAITracking}from'@microsoft/applicationinsights-react-js';import{ReactPlugin}from'@microsoft/applicationinsights-react-js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class App extends React.Component{constructor(props){super(props);this.state={data:null,error:null,loading:false,buttonClicked:''};this.handleButtonClick=this.handleButtonClick.bind(this);this.handlePopState=this.handlePopState.bind(this);}componentDidMount(){// Listen for changes in browser history (back/forward or manual URL entry)\nwindow.addEventListener('popstate',this.handlePopState);// Handle the initial URL when the page loads\nthis.handlePopState();}componentWillUnmount(){// Clean up the event listener\nwindow.removeEventListener('popstate',this.handlePopState);}handlePopState(){const validPaths=['/posts','/users'];const currentPath=window.location.pathname;if(!validPaths.includes(currentPath)){// Show error message if the URL is invalid\nthis.setState({error:`The page at ${currentPath} doesn't exist.`,data:null});}else{// Clear any previous errors if navigating back to a valid path\nthis.setState({error:null});}}async handleButtonClick(operationName,endpoint,urlPath){this.setState({loading:true,error:null,buttonClicked:operationName});// Change the URL manually without reloading the page\nwindow.history.pushState({},'',urlPath);// Start tracking the operation\nthis.props.appInsights.startTrackEvent(operationName);try{const response=await fetch(endpoint);if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();this.setState({data,error:null,loading:false});// Stop tracking and log successful data fetch\nthis.props.appInsights.stopTrackEvent(operationName,{status:'success'});}catch(error){this.setState({data:null,error:error.message,loading:false});// Stop tracking and log failed data fetch\nthis.props.appInsights.stopTrackEvent(operationName,{status:'failure',error:error.message});}}render(){const{data,error,loading,buttonClicked}=this.state;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Hello, Welcome to the React World!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>this.handleButtonClick('GetProductsOperation','https://jsonplaceholder.typicode.com/posts','/posts'),disabled:loading,children:loading&&buttonClicked==='GetProductsOperation'?'Loading...':'Fetch Posts'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>this.handleButtonClick('GetUsersOperation','https://jsonplaceholder.typicode.com/users','/users'),disabled:loading,children:loading&&buttonClicked==='GetUsersOperation'?'Loading...':'Fetch Users'}),/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),data&&/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(data,null,2)})]})]});}}export default withAITracking(ReactPlugin,App);","map":{"version":3,"names":["React","withAITracking","ReactPlugin","jsx","_jsx","jsxs","_jsxs","App","Component","constructor","props","state","data","error","loading","buttonClicked","handleButtonClick","bind","handlePopState","componentDidMount","window","addEventListener","componentWillUnmount","removeEventListener","validPaths","currentPath","location","pathname","includes","setState","operationName","endpoint","urlPath","history","pushState","appInsights","startTrackEvent","response","fetch","ok","Error","json","stopTrackEvent","status","message","render","className","children","onClick","disabled","JSON","stringify"],"sources":["/home/veeresh133/app/test-error-react/react-az/src/App.js"],"sourcesContent":["import React from 'react';\nimport { withAITracking } from '@microsoft/applicationinsights-react-js';\nimport { ReactPlugin } from '@microsoft/applicationinsights-react-js';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: null,\n            error: null,\n            loading: false,\n            buttonClicked: '',\n        };\n        this.handleButtonClick = this.handleButtonClick.bind(this);\n        this.handlePopState = this.handlePopState.bind(this);\n    }\n\n    componentDidMount() {\n        // Listen for changes in browser history (back/forward or manual URL entry)\n        window.addEventListener('popstate', this.handlePopState);\n       \n        // Handle the initial URL when the page loads\n        this.handlePopState();\n    }\n\n    componentWillUnmount() {\n        // Clean up the event listener\n        window.removeEventListener('popstate', this.handlePopState);\n    }\n\n    handlePopState() {\n        const validPaths = ['/posts', '/users'];\n        const currentPath = window.location.pathname;\n\n        if (!validPaths.includes(currentPath)) {\n            // Show error message if the URL is invalid\n            this.setState({\n                error: `The page at ${currentPath} doesn't exist.`,\n                data: null\n            });\n        } else {\n            // Clear any previous errors if navigating back to a valid path\n            this.setState({ error: null });\n        }\n    }\n\n    async handleButtonClick(operationName, endpoint, urlPath) {\n        this.setState({ loading: true, error: null, buttonClicked: operationName });\n\n        // Change the URL manually without reloading the page\n        window.history.pushState({}, '', urlPath);\n\n        // Start tracking the operation\n        this.props.appInsights.startTrackEvent(operationName);\n\n        try {\n            const response = await fetch(endpoint);\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            const data = await response.json();\n\n            this.setState({ data, error: null, loading: false });\n\n            // Stop tracking and log successful data fetch\n            this.props.appInsights.stopTrackEvent(operationName, { status: 'success' });\n        } catch (error) {\n            this.setState({ data: null, error: error.message, loading: false });\n\n            // Stop tracking and log failed data fetch\n            this.props.appInsights.stopTrackEvent(operationName, { status: 'failure', error: error.message });\n        }\n    }\n\n    render() {\n        const { data, error, loading, buttonClicked } = this.state;\n\n        return (\n            <div className=\"App\">\n                <h1>Hello, Welcome to the React World!</h1>\n                <button\n                    onClick={() => this.handleButtonClick('GetProductsOperation', 'https://jsonplaceholder.typicode.com/posts', '/posts')}\n                    disabled={loading}\n                >\n                    {loading && buttonClicked === 'GetProductsOperation' ? 'Loading...' : 'Fetch Posts'}\n                </button>\n                <button\n                    onClick={() => this.handleButtonClick('GetUsersOperation', 'https://jsonplaceholder.typicode.com/users', '/users')}\n                    disabled={loading}\n                >\n                    {loading && buttonClicked === 'GetUsersOperation' ? 'Loading...' : 'Fetch Users'}\n                </button>\n                <div>\n                    {error && <p>Error: {error}</p>}\n                    {data && <pre>{JSON.stringify(data, null, 2)}</pre>}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withAITracking(ReactPlugin, App);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}